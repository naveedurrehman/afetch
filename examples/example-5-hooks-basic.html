<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>afetch.js - Example 5: Hooks</title>
  <script src="../src/afetch.js" defer></script>
  <!--For CDN: 
    <script src="https://cdn.jsdelivr.net/gh/naveedurrehman/afetch/dist/afetch.min.js" defer></script>
  -->
</head>

<body>

  <h1>afetch.js - Example 5: Hooks Basic</h1>

  <p>
    Hook functions run at different stages of the request lifecycle. This example demonstrates the onStart, onResponse,
    and onComplete hooks
  </p>

  <a fetch='https://www.naveedurrehman.com/afetch/api/main/?love=life' fetch-onstart="hookOnStart"
    fetch-onresponse="hookOnResponse" fetch-oncomplete="hookOnComplete" fetch-target="#result">
    Click Me!
  </a>

  <div id="lblStart" style="display:none;"> &check; Started</div>
  <pre id="infoStart"></pre>

  <div id="lblResponse" style="display:none;"> &check; Response Received</div>
  <pre id="infoResponse"></pre>

  <div id="lblComplete" style="display:none;"> &check; Completed</div>
  <pre id="infoComplete"></pre>

  <pre id="result"></pre>

  <script>

    // This hook executes just before the fetch request starts.
    function hookOnStart(data) {
      console.log(data);
      document.getElementById('infoStart').innerHTML = JSON.stringify(data, null, 2);
      document.getElementById('lblStart').style.display = '';
    }

    // This hook executes when the response is received. For parsed responses (JSON, text, and blob), see Example 6.
    function hookOnResponse(data) {
      console.log(data);
      document.getElementById('infoResponse').innerHTML = JSON.stringify(data, null, 2);
      document.getElementById('lblResponse').style.display = '';

    }

    // This hook executes after the fetch request is complete.
    function hookOnComplete(data) {
      console.log(data);
      document.getElementById('infoComplete').innerHTML = JSON.stringify(data, null, 2);
      document.getElementById('lblComplete').style.display = '';
    }

  </script>

</body>

</html>