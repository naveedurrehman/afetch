<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>afetch.js - Example 8: Handling Timeout</title>
  <script src="../src/afetch.js" defer></script>
  <!--For CDN: 
    <script src="https://cdn.jsdelivr.net/gh/naveedurrehman/afetch/dist/afetch.min.js" defer></script>
  -->
</head>

<body>

  <h1>afetch.js - Example 8: Handling Timeout</h1>

  <p>
    This example demonstrates a hook that triggers after a timeout: the fetch is limited to 2000 ms, but the API server
    responds after 3000 ms.
  </p>

  <a fetch='https://www.naveedurrehman.com/afetch/api/slow/' fetch-timeout="2000" fetch-ontimeout="hookOnTimeout"
    fetch-onfailure="hookOnFailure" fetch-onerror="hookOnError">
    Click Me!
  </a>

  <p>

    Timeout error hook:
  <pre id="lblTimeout"></pre>

  Failure error hook:
  <pre id="lblFailure"></pre>

  Error hook:
  <pre id="lblError"></pre>

  </p>

  <script>

    // The fetch-ontimeout hook triggers on timeouts
    function hookOnTimeout({ element, url, method, timeout }) {
      console.log([element, url, method, timeout]);
      document.getElementById('lblTimeout').innerHTML = 'Timeout!';
    }

    // The fetch-onfailure hook also triggers on timeouts
    function hookOnFailure({ element, url, method, error }) {
      console.log([element, url, method, error]);
      document.getElementById('lblFailure').innerHTML = 'Timeout!';
    }

    // The fetch-onerror hook triggers on any kind of error.
    function hookOnError({ element, error }) {
      console.log([element, error]);
      document.getElementById('lblError').innerHTML = error;
    }

  </script>

</body>

</html>