<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>afetch.js - Example 8: Handling Timeout</title>
  <script src="../src/afetch.js" defer></script>
</head>

<body>
  <h1>afetch.js - Example 8: Handling Timeout</h1>

  <p>
    The allowed time for fetch is 2000ms but the server will respond in 3000sec.
  </p>

  <a href='#' fetch='server_slow.php' fetch-timeout="2000" fetch-ontimeout="hookOnTimeout"
    fetch-onfailure="hookOnFailure" fetch-onerror="hookOnError" fetch-target="#result">
    Click me and check console!
  </a>

  <div id="result"></div>

  <script>

    // The fetch-ontimeout hook triggers on timeouts
    function hookOnTimeout({ element, url, method }) {
      console.log(['hookOnTimeout', element, url, method]);
      document.getElementById('result').innerHTML = 'Timeout!';
    }

    // The fetch-onfailure hook triggers on network errors, timeouts, aborted requests, HTTP non-OK statuses, or unexpected parsing failures.
    function hookOnFailure({ element, url, method, error }) {
      console.log(['hookOnFailure', element, url, method, error]);
      document.getElementById('result').innerHTML = error;
    }

    // The fetch-onerror hook triggers on any kind of error.
    function hookOnError({ element, error }) {
      console.log(['hookOnError', element, error]);
      document.getElementById('result').innerHTML = error;
    }
  </script>

</body>

</html>